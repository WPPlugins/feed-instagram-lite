function add_separator(a){if(a.length>3){var b=a.length%3,c=b>0?a.substring(0,b):"";for(i=0;i<Math.floor(a.length/3);i++)c+=0==b&&0==i?a.substring(b+3*i,b+3*i+3):"."+a.substring(b+3*i,b+3*i+3);return c}return a}function convert_timestamp(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],c=new Date(1e3*a),d=c.getDate(),e=c.getMonth(),f=c.getFullYear();return d+" "+b[e]+" "+f.toString().substring(2)}function kFormatter(a){return a>999?(a/1e3).toFixed(1)+"k":a}function generateHeader(a,b,c){jQuery.ajax({type:"GET",dataType:"jsonp",cache:!1,url:"https://api.instagram.com/v1/users/"+b+"/?access_token="+c.gifeed_at,success:function(c){if("undefined"!=typeof c.data){var d=jQuery("#insta-header-"+a+"-"+b),e=a+"-"+b;d.append('<img id="insta-userpic-'+e+'" class="gifeed-user-pic" src="'+c.data.profile_picture+'">'),d.append('<a title="'+c.data.full_name+'" href="https://www.instagram.com/'+c.data.username+'" target="_blank"><span id="insta-username-'+e+'" class="gifeed-username">'+c.data.username+"</span></a>"),d.append('<span id="insta-followers-'+e+'" class="gifeed-followers"><span class="fa fa-user" style="margin-right:4px;"></span>'+add_separator(c.data.counts.followed_by.toString())+"</span>"),d.append('<span id="insta-totalposts-'+e+'" class="gifeed-totalposts"><span class="fa fa-picture-o" style="margin-right:4px;"></span>'+add_separator(c.data.counts.media.toString())+"</span>"),d.append('<p id="insta-userbio-'+e+'" class="gifeed-userbio">'+c.data.bio+"</p>"),d.fadeIn(300)}}})}function ghozyInstagramFeed(a){jQuery(".gifeed_main_container").each(function(){var a=window[jQuery(this).attr("data-localize")];"on"==a.opt.header&&a.instafeeds.length>1&&jQuery.isNumeric(a.feed_header_id)&&generateHeader(a.unique_num,a.feed_header_id,a),jQuery.each(a.instafeeds,function(b,c){var d,e,f;"on"==a.opt.header&&"individual"==a.feed_format&&"user"==a.getby[b]&&generateHeader(a.unique_num,c,a),a.instafeeds.length>1&&"individual"==a.feed_format?(e=d+a.unique_num+c,e=jQuery("#insta-loadmore-"+a.unique_num+"-"+c),f=e):a.instafeeds.length>1&&"group"==a.feed_format?(e=d+a.unique_num,e=jQuery("#insta-loadmore-"+a.unique_num),f=e):(e=d+a.unique_num+c,e=jQuery("#insta-loadmore-"+a.unique_num+"-"+c),f=e);var g=new Instafeed({target:"gifeed-"+a.unique_num+"-"+c,get:""+a.getby[b],resolution:"low_resolution",sortBy:"most-recent",limit:6,aT:a.gifeed_at,before:function(){"tagName"==a.getbytype[b]?this.options.tagName=""+c:this.options.userId=""+c},after:function(b){this.hasNext()||setTimeout(function(){f.text("Load More").css({"pointer-events":"none",background:"#adadad"})},300);var d=new Masonry("#gifeed-"+a.unique_num+"-"+c,{columnWidth:".gifeed-items",itemSelector:".gifeed-items"});jQuery("#gifeed-"+a.unique_num+"-"+c).imagesLoaded().always(function(a){d.layout()});d.on("layoutComplete",function(a,b){f.removeClass().addClass("gifeed-loadmore").text("Load More").fadeIn(1e3)})},error:function(a){jQuery("#"+this.options.target).append('<div class="gifeed_error_msg"><span class="fa fa-exclamation-triangle" aria-hidden="true"></span><p>'+a+"</p></div>")},template:'<li id="{{id}}-li" class="gifeed-{{type}} gifeed-items gifeed_col_3"><a id="{{id}}" href="{{link}}" target="_blank"><span title="{{type}} media type" class="fa {{typeicon}} media_type" aria-hidden="true"></span><img id="{{id}}-img" src="{{image}}" class="gifeed-item-image"></a></li>'});g.run(),f.on("click",function(){jQuery(this).html('<span id="bubblingG_1"></span><span id="bubblingG_2"></span><span id="bubblingG_3"></span>').removeClass().addClass("bubblingG"),g.next()})}),jQuery("#preloader-"+a.unique_num).fadeOut(1e3,function(){jQuery(".gifeed-container").fadeIn(1e3)})})}(function(){var a;a=function(){function a(a,b){var c,d;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",nonce:"",links:!0,mock:!1,useHttp:!1},"object"==typeof a)for(c in a)d=a[c],this.options[c]=d;this.context=null!=b?b:this,this.unique=this._genKey()}a.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&this.context.nextUrl.length>0},a.prototype.next=function(){return!!this.hasNext()&&this.run(this.context.nextUrl)},a.prototype._genKey=function(){var a;return a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+a()+a()+a()+a()},a.prototype._buildUrl=function(){var a,b,c;switch(a="server"==this.options.fetchMode?this.options.ajaxUrl:"https://api.instagram.com/v1",this.options.get){case"popular":b="media/popular";break;case"tagged":if(!this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");b="tags/"+this.options.tagName+"/media/recent";break;case"location":if(!this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");b="locations/"+this.options.locationId+"/media/recent";break;case"user":if(!this.options.userId)throw new Error("No user specified. Use the 'userId' option.");b="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return"server"==this.options.fetchMode?c=a+"?endpoint="+b+"&security="+this.options.nonce+"&cmd=get_media_data&count="+this.options.limit+"&action=gifeed_instagram_authentication&mode=normal&callback=instafeedCache"+this.unique+".parse":(c=a+"/"+b,c+=null!=this.options.aT?"?access_token="+this.options.aT:"?client_id="+this.options.clientId,null!=this.options.limit&&(c+="&count="+this.options.limit),c+="&callback=instafeedCache"+this.unique+".parse"),c},a.prototype.run=function(b){var c,d,e;if("string"!=typeof this.options.aT&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(e=document.createElement("script"),e.id="instafeed-fetcher",e.src=b||this._buildUrl(),c=document.getElementsByTagName("head"),c[0].appendChild(e),d="instafeedCache"+this.unique,window[d]=new a(this.options,this),window[d].unique=this.unique),!0},a.prototype.parse=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if("object"!=typeof a){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==a.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,a.meta.error_message),!1;throw new Error("Error from Instagram: "+a.meta.error_message)}if(0===a.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,a),this.context.nextUrl="",null!=a.pagination&&(this.context.nextUrl=a.pagination.next_url),"none"!==this.options.sortBy)switch(F="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"),E="least"===F[0],F[1]){case"random":a.data.sort(function(){return.5-Math.random()});break;case"recent":a.data=this._sortBy(a.data,"created_time",E);break;case"liked":a.data=this._sortBy(a.data,"likes.count",E);break;case"commented":a.data=this._sortBy(a.data,"comments.count",E);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&this.options.mock===!1){if(q=a.data,D=parseInt(this.options.limit,10),null!=this.options.limit&&q.length>D&&(q=q.slice(0,D)),h=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(q=this._filter(q,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(j="",o="",u="",H=document.createElement("div"),l=0,z=q.length;l<z;l++){if(m=q[l],n=m.images[this.options.resolution],"object"!=typeof n)throw g="No image found for resolution: "+this.options.resolution+".",new Error(g);v=n.width,s=n.height,t="square",v>s&&(t="landscape"),v<s&&(t="portrait"),p=n.url,k=window.location.protocol.indexOf("http")>=0,k&&!this.options.useHttp&&(p=p.replace(/https?:\/\//,"//")),null!=m.caption?tempCap=this._escapeHtml(m.caption.text):tempCap="",o=this._makeTemplate(this.options.template,{model:m,id:m.id,link:m.link,type:m.type,typeicon:"image"==m.type?"fa-picture-o":"fa-youtube-play",image:p,width:v,height:s,orientation:t,caption:tempCap,timestamp:convert_timestamp(m.created_time),likes:kFormatter(m.likes.count),comments:kFormatter(m.comments.count),location:this._getObjectProperty(m,"location.name")}),j+=o}for(H.innerHTML=j,e=[],d=0,c=H.childNodes.length;d<c;)e.push(H.childNodes[d]),d+=1;for(x=0,A=e.length;x<A;x++)C=e[x],h.appendChild(C)}else for(y=0,B=q.length;y<B;y++){if(m=q[y],r=document.createElement("img"),n=m.images[this.options.resolution],"object"!=typeof n)throw g="No image found for resolution: "+this.options.resolution+".",new Error(g);p=n.url,k=window.location.protocol.indexOf("http")>=0,k&&!this.options.useHttp&&(p=p.replace(/https?:\/\//,"//")),r.src=p,this.options.links===!0?(b=document.createElement("a"),b.href=m.link,b.appendChild(r),h.appendChild(b)):h.appendChild(r)}if(G=this.options.target,"string"==typeof G&&(G=document.getElementById(G)),null==G)throw g='No element with id="'+this.options.target+'" on page.',new Error(g);G.appendChild(h),i=document.getElementsByTagName("head")[0],i.removeChild(document.getElementById("instafeed-fetcher")),w="instafeedCache"+this.unique,window[w]=void 0;try{delete window[w]}catch(a){f=a}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0};var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return a.prototype._escapeHtml=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return b[a]})},a.prototype._makeTemplate=function(a,b){var c,d,e,f,g;for(d=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,c=a;d.test(c);)f=c.match(d)[1],g=null!=(e=this._getObjectProperty(b,f))?e:"",c=c.replace(d,function(){return""+g});return c},a.prototype._getObjectProperty=function(a,b){var c,d;for(b=b.replace(/\[(\w+)\]/g,".$1"),d=b.split(".");d.length;){if(c=d.shift(),!(null!=a&&c in a))return null;a=a[c]}return a},a.prototype._sortBy=function(a,b,c){var d;return d=function(a,d){var e,f;return e=this._getObjectProperty(a,b),f=this._getObjectProperty(d,b),c?e>f?1:-1:e<f?1:-1},a.sort(d.bind(this)),a},a.prototype._filter=function(a,b){var c,d,e,f,g;for(c=[],d=function(a){if(b(a))return c.push(a)},e=0,g=a.length;e<g;e++)f=a[e],d(f);return c},a}(),function(a,b){return"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.Instafeed=b()}(this,function(){return a})}).call(this),jQuery,jQuery(document).ready(function(a){ghozyInstagramFeed()});